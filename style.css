/* ============================================================
   NPOJ STYLESHEET - FIX LỖI LỆCH NGANG (LEFT/RIGHT ALIGN)
   ============================================================ */

:root {
    --primary: #3b82f6; --accent: #8b5cf6; --bg: #020617;
    --sidebar: #0f172a; --card: #1e293b; --border: rgba(255,255,255,0.1);
    --term-bg: #000000; --term-text: #4ade80;
}

/* RESET */
* { box-sizing: border-box; } /* Bỏ transition toàn cục để tránh lag khung hình */

body { 
    margin: 0; font-family: 'Inter', sans-serif; 
    background: var(--bg); color: #fff; 
    overflow: hidden; height: 100vh; 
}

/* --- HỆ THỐNG VIEW --- */
.view { display: none; opacity: 0; transform: translateY(10px); height: 100%; transition: opacity 0.3s ease; }
.view.active { display: block !important; opacity: 1; transform: translateY(0); }
.hidden { display: none !important; }

/* --- BỐ CỤC IDE --- */
.app-layout { display: flex; height: 100vh; }
.sidebar { width: 260px; background: var(--sidebar); padding: 30px; border-right: 1px solid var(--border); display: flex; flex-direction: column; }
.main-body { flex: 1; padding: 25px; overflow-y: auto; }

.ide-container { display: grid; grid-template-columns: 350px 1fr; gap: 20px; height: calc(100vh - 130px); margin-top: 15px; }
.ide-left { display: flex; flex-direction: column; gap: 20px; overflow-y: auto; }
.ide-right { display: grid; grid-template-rows: 1fr 220px; gap: 20px; overflow: hidden; }

/* --- EDITOR CHỐNG LỆCH TRÁI/PHẢI --- */
.editor-section { 
    position: relative; background: #010409; 
    border-radius: 12px; border: 1px solid #333; 
    overflow: hidden; display: flex; flex-direction: column; 
}
.editor-wrapper { flex: 1; position: relative; background: #010409 !important; }

/* ÉP ĐỒNG BỘ TUYỆT ĐỐI */
#code-editor, 
#highlighting-layer, 
#highlighting-layer pre, 
#highlighting-layer code {
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
    width: 100% !important;
    height: 100% !important;
    
    /* Xử lý căn lề ngang */
    margin: 0 !important;
    padding: 20px !important;
    border: none !important;
    outline: none !important;
    
    font-family: 'Fira Code', monospace !important;
    font-size: 14px !important;
    line-height: 24px !important;
    tab-size: 4 !important;
    white-space: pre !important;
    word-wrap: normal !important;
    box-sizing: border-box !important;
    text-align: left !important; /* Ép sát lề trái */
}

#code-editor {
    z-index: 2;
    color: transparent !important;
    background: transparent !important;
    caret-color: white;
    resize: none;
    overflow: auto;
    -webkit-text-fill-color: transparent; /* Fix cho một số trình duyệt mobile/web */
}

#highlighting-layer {
    z-index: 1;
    pointer-events: none;
    overflow: hidden;
}

/* XỬ LÝ PRISM (Xóa bỏ ô trắng và margin lệch) */
#highlighting-layer pre[class*="language-"] {
    background: transparent !important;
    box-shadow: none !important;
    padding: 20px !important; /* Phải khớp chính xác với textarea */
}

#highlighting-layer code[class*="language-"] {
    background: transparent !important;
    padding: 0 !important;
    display: block !important;
}

/* --- CÁC PHẦN CÒN LẠI GIỮ NGUYÊN TỪ BẢN GỐC --- */
.pane-header { background: #1e293b; padding: 10px 15px; display: flex; justify-content: space-between; align-items: center; font-size: 11px; font-weight: bold; }
.terminal-body { background: var(--term-bg); color: var(--term-text); padding: 15px; font-family: 'Consolas', monospace; flex: 1; overflow-y: auto;}
.card { background: var(--card); border: 1px solid var(--border); padding: 25px; border-radius: 16px;}
button { cursor: pointer; border: none; font-weight: 700; border-radius: 8px; padding: 10px 20px; font-size: 13px;}
.btn-primary { background: var(--primary); color: white;}
.btn-success { background: #10b981; color: white;}
.input-modern { width: 100%; padding: 12px; background: #0f172a; border: 1px solid #334155; border-radius: 8px; color: white; margin-bottom: 10px;}